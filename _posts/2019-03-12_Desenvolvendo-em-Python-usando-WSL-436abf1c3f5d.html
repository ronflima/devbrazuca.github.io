<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Desenvolvendo em Python usando WSL</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Desenvolvendo em Python usando WSL</h1>
</header>
<section data-field="subtitle" class="p-summary">
Como ajustar seu ambiente Windows 10
</section>
<section data-field="body" class="e-content">
<section name="a622" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="f5b8" id="f5b8" class="graf graf--h3 graf--leading graf--title">Desenvolvendo em Python usando¬†WSL</h3><h4 name="64be" id="64be" class="graf graf--h4 graf-after--h3 graf--subtitle">Como ajustar seu ambiente Windows¬†10</h4><figure name="b18b" id="b18b" class="graf graf--figure graf-after--h4"><img class="graf-image" data-image-id="1*ZYZfAKsFVhWlRJjMuC-dvg.png" data-width="2786" data-height="1825" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*ZYZfAKsFVhWlRJjMuC-dvg.png"></figure><p name="4d1b" id="4d1b" class="graf graf--p graf-after--figure">Desde que migrei do macOS para o Windows 10 tenho procurado formas de desenvolver as solu√ß√µes da empresa no ambiente mais pr√≥ximo do ambiente de produ√ß√£o. √â √≥bvio que o ambiente de produ√ß√£o, que est√° hoje no Debian Stretch, √© bem diferente do Windows. Mas h√° uma camada de compatibilidade que a Microsoft vem desenvolvendo que est√° quase l√°.</p><p name="1e6e" id="1e6e" class="graf graf--p graf-after--p">Antes de come√ßar, um pequeno aviso: este artigo parte da premissa de que o plugin para Python do VSCode est√° <a href="https://github.com/Microsoft/vscode-python/issues/67" data-href="https://github.com/Microsoft/vscode-python/issues/67" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">sem suporte adequado</a> para o WSL como shell.</p><h4 name="10b7" id="10b7" class="graf graf--h4 graf-after--p">Antes de¬†come√ßar</h4><p name="ee38" id="ee38" class="graf graf--p graf-after--h4">O Windows Subsystem for Linux √© uma camada de compatibilidade que permite que execut√°veis ELF rodem dentro do Windows sem a necessidade de virtualiza√ß√£o. Em teoria, deveria ser mais eficiente executar uma aplica√ß√£o linux dentro do WSL do que numa VM.</p><p name="9a90" id="9a90" class="graf graf--p graf-after--p">O WSL, no entanto, s√≥ est√° dispon√≠vel para as vers√µes de 64 bits do Windows. Se o seu Windows √© uma vers√£o 32 bits, o upgrade √© mandat√≥rio.</p><h4 name="8596" id="8596" class="graf graf--h4 graf-after--p">Passo 1: Instale o WSL e a sua Distro predileta</h4><p name="34de" id="34de" class="graf graf--p graf-after--h4">Para instalar o WSL √© um processo r√°pido. Entre no Painel de Controle, Programas e Recursos e selecione Ativar ou Desativar Recursos do Windows. Para achar isto √© preciso ir no Painel de Controle, o antigo, que ainda existe no Windows 10 e que d√° aquele ar de que o sistema operacional est√° inacabado. Voc√™ dever√° ver algo assim:</p><figure name="f93d" id="f93d" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*hR_M6mrkPuWtJFMp3xyMtw.png" data-width="1408" data-height="742" src="https://cdn-images-1.medium.com/max/800/1*hR_M6mrkPuWtJFMp3xyMtw.png"></figure><p name="6013" id="6013" class="graf graf--p graf-after--figure">Ao clicar em Ativar‚Ä¶ voc√™ ver√° algo assim:</p><figure name="1cca" id="1cca" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*Jgw7o_YRI4FcMScnxhkU1w.png" data-width="555" data-height="492" src="https://cdn-images-1.medium.com/max/800/1*Jgw7o_YRI4FcMScnxhkU1w.png"></figure><p name="ea8e" id="ea8e" class="graf graf--p graf-after--figure">Basta selecionar <em class="markup--em markup--p-em">Subsistema do Widows para Linux</em> e aguardar. Certamente voc√™ ter√° de reiniciar seu computador.</p><p name="e738" id="e738" class="graf graf--p graf-after--p">Feito isto, voc√™ precisa entrar na Microsoft Store e procurar por Linux. Voc√™ ver√° algo assim:</p><figure name="6999" id="6999" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*iqP3Nh4ATwaaEi1-gfqCLQ.png" data-width="1228" data-height="985" src="https://cdn-images-1.medium.com/max/800/1*iqP3Nh4ATwaaEi1-gfqCLQ.png"></figure><p name="6ae7" id="6ae7" class="graf graf--p graf-after--figure">Escolha uma das distros e fa√ßa a instala√ß√£o. Como eu gosto muito do Debian, escolhi aquela distro. Mas isto n√£o quer dizer que √© a distro que voc√™ deva escolher. Escolha a que √© do seu gosto. Infelizmente s√≥ h√° estas distros dispon√≠veis no momento em que escrevo este pequeno artigo.</p><p name="98be" id="98be" class="graf graf--p graf-after--p">Uma vez que voc√™ tenha instalado a distro, execute-a clicando no Menu Iniciar. Pronto, o linux est√° rodando no seu Windows. Para que as coisas fiquem perfeitas, ainda √© preciso um passo.</p><p name="38a6" id="38a6" class="graf graf--p graf-after--p">Dentro do linux, edite o arquivo <code class="markup--code markup--p-code">/etc/wsl.conf</code> e coloque estas linhas nele:</p><pre name="6870" id="6870" class="graf graf--pre graf-after--p">[automount]<br>enabled = true<br>options = &quot;metadata,umask=22,fmask=11&quot;<br>mountFsTab = true</pre><pre name="c7fd" id="c7fd" class="graf graf--pre graf-after--pre">[network]<br>generateHosts = true<br>generateResolvConf = true</pre><p name="a041" id="a041" class="graf graf--p graf-after--pre">Salve, feche o linux e abra-o novamente. Estas configura√ß√µes s√£o para que o sistema de arquivos do Windows, que √© montado em <code class="markup--code markup--p-code">/mnt/c</code> ou <code class="markup--code markup--p-code">/mnt/d</code> dependendo dos drives que voc√™ tenha, respeitem os atributos do comando <code class="markup--code markup--p-code">chmod</code>¬†.</p><p name="6f9a" id="6f9a" class="graf graf--p graf-after--p">Se quiser mais detalhes, <a href="https://docs.microsoft.com/en-us/windows/wsl/wsl-config" data-href="https://docs.microsoft.com/en-us/windows/wsl/wsl-config" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">clique aqui</a>.</p><h4 name="7623" id="7623" class="graf graf--h4 graf-after--p">Passo 2: instale o¬†GIT</h4><p name="beb0" id="beb0" class="graf graf--p graf-after--h4">Este √© o passo mais simples de todos! Para instalar o GIT use o gerenciador de pacotes da sua distro. No Debian, √© t√£o simples quanto:</p><p name="4764" id="4764" class="graf graf--p graf-after--p"><code class="markup--code markup--p-code">sudo apt install git</code></p><p name="3caa" id="3caa" class="graf graf--p graf-after--p">√â de bom grado, no entanto, atualizar o registro do seu gerenciador de pacotes antes de proceder √† instala√ß√£o.</p><h4 name="6c16" id="6c16" class="graf graf--h4 graf-after--p">Passo 3: instale o VSCode DENTRO do¬†linux</h4><p name="9a50" id="9a50" class="graf graf--p graf-after--h4">Exatamente! Instale o VSCode dentro do linux que voc√™ acabou de instalar e configurar. O processo √© <a href="https://code.visualstudio.com/docs/setup/linux" data-href="https://code.visualstudio.com/docs/setup/linux" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">descrito aqui </a>e n√£o vou ficar repetindo. Afinal, quem fez o software tem muito mais compet√™ncia para te explicar como instalar o VSCode no linux do que eu.</p><p name="c680" id="c680" class="graf graf--p graf-after--p">Por√©m, a coisa ainda n√£o acabou. Existe um problema: o WSL n√£o suporta apps gr√°ficos. üò±</p><p name="e881" id="e881" class="graf graf--p graf-after--p">Mas existe uma forma de resolver isso sem gambiarra.</p><h4 name="d306" id="d306" class="graf graf--h4 graf-after--p">Passo 4: instale um servidor¬†XWindows</h4><p name="7e75" id="7e75" class="graf graf--p graf-after--h4">Toda aplica√ß√£o gr√°fica para linux usa um servidor XWindows. Ao longo do tempo as distros mudaram do X11 para o XOrg e por a√≠ vai. O grande barato do XWindows √© que ele √© naturalmente distribu√≠do, ou seja, a aplica√ß√£o renderiza a janela onde o servidor roda.</p><p name="75c3" id="75c3" class="graf graf--p graf-after--p">Isto quer dizer que o servidor XWindows <strong class="markup--strong markup--p-strong">n√£o precisa estar </strong>na mesma m√°quina da aplica√ß√£o. Esta √© uma caracter√≠stica do XWindows: voc√™ pode ter uma m√°quina na qual a aplica√ß√£o executa e outra na qual ela renderiza.</p><p name="7b08" id="7b08" class="graf graf--p graf-after--p">Procurei por servidores XWindows para Windows e achei o VcXsrv. At√© aqui tenho achado o software muito est√°vel. A principal raz√£o para a escolha foi o fato do software ter commits recentes no reposit√≥rio. Sim, o software √© de c√≥digo aberto.Voc√™ baixa a <a href="https://sourceforge.net/projects/vcxsrv/files/latest/download" data-href="https://sourceforge.net/projects/vcxsrv/files/latest/download" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">√∫ltima vers√£o daqui</a>.</p><p name="c530" id="c530" class="graf graf--p graf-after--p">Uma vez instalado, configure-o para usar janelas separadas e execute-o. √â poss√≠vel salvar o arquivo de configura√ß√£o para n√£o ter de configur√°-lo todas as vezes. Por√©m, s√≥ isso n√£o √© suficiente. √â preciso, ainda, configurar seu linux para entender onde est√° o servidor X. E isso √© muito f√°cil. Acrescente esta linha ao seu¬†<code class="markup--code markup--p-code">.bashrc</code>:</p><p name="7318" id="7318" class="graf graf--p graf-after--p"><code class="markup--code markup--p-code">export DISPLAY=:0</code></p><p name="9f43" id="9f43" class="graf graf--p graf-after--p">Pronto. Agora √© carregar o VSCode direto da linha de comando e v√™-lo renderizando no Windows como se fosse uma aplica√ß√£o do Windows. Mas, lembre-se: ele est√° rodando DENTRO do linux.</p><h4 name="b2ab" id="b2ab" class="graf graf--h4 graf-after--p">Edit 1: Compartilhe fontes do Windows com o¬†WSL</h4><p name="c266" id="c266" class="graf graf--p graf-after--h4">Como √© poss√≠vel executar apps XWindows no WSL, √© interessante instalar novas fontes, principalmente se voc√™ decidir usar o Gimp ou quiser mudar as <em class="markup--em markup--p-em">faces</em> do seu Emacs para usar a fonte Consolas. Uma sa√≠da √© copiar as fontes do Windows para dentro do WSL, mas isso duplica as coisas. Por√©m, existe uma solu√ß√£o melhor: compartilhar as fontes do Windows, deixando-as acess√≠veis pelos programas dentro do WSL.</p><p name="ac50" id="ac50" class="graf graf--p graf-after--p">Como fazer isso? Crie o arquivo <code class="markup--code markup--p-code">local.conf</code> dentro de <code class="markup--code markup--p-code">/etc/conf</code> com o seguinte conte√∫do:</p><pre name="bf26" id="bf26" class="graf graf--pre graf-after--p">&lt;?xml version=&quot;1.0&quot;?&gt;<br>&lt;!DOCTYPE fontconfig SYSTEM &quot;fonts.dtd&quot;&gt;<br>&lt;fontconfig&gt;<br>    &lt;dir&gt;/mnt/c/Windows/Fonts&lt;/dir&gt;<br>&lt;/fontconfig&gt;</pre><p name="427c" id="427c" class="graf graf--p graf-after--pre">Coloque na tag <code class="markup--code markup--p-code">&lt;dir&gt;</code> o local de instala√ß√£o das fontes no seu Windows. O caminho que est√° no exemplo √© o do meu PC e, via de regra, √© onde o Windows coloca as fontes mesmo.</p><p name="e3bf" id="e3bf" class="graf graf--p graf-after--p">Feito isto, reinicie o seu PC e <em class="markup--em markup--p-em">voil√°!</em> Fontes do Windows dentro do WSL!</p><h4 name="4e43" id="4e43" class="graf graf--h4 graf-after--p">Antes de¬†ir</h4><p name="a5ef" id="a5ef" class="graf graf--p graf-after--h4">Eu esbarrei com um problema chato no VSCode: sempre que mandava navegar para uma pasta, ele ca√≠a. O problema estava na configura√ß√£o do time zone do linux instalado. Foi necess√°rio reconfigurar o time zone adequadamente. No Debian/Ubuntu isto √© feito assim:</p><p name="be8b" id="be8b" class="graf graf--p graf-after--p"><code class="markup--code markup--p-code">dpkg-reconfigure tzdata</code></p><p name="4aa2" id="4aa2" class="graf graf--p graf-after--p">√â de bom grado, tamb√©m, voc√™ configurar o locale do seu linux. Por padr√£o, ele vem com locale C. No Debian a forma mais simples √©:</p><p name="9769" id="9769" class="graf graf--p graf-after--p"><code class="markup--code markup--p-code">dpkg-reconfigure locales</code></p><p name="57b1" id="57b1" class="graf graf--p graf-after--p">Pronto, voc√™ est√° pronto para ir. Agora √© instalar o <code class="markup--code markup--p-code">pyenv</code>, o seu int√©rprete python, virtualenv ou qualquer que seja o gerenciador de ambientes python que voc√™ usa. √â uma boa ideia instalar, tamb√©m, o bom e velho GCC, a LibC, GLibC e o utilit√°rio MAKE. Muita coisa precisa ser compilada e esta √© a melhor maneira de evitar sofrer.</p><p name="67a4" id="67a4" class="graf graf--p graf-after--p graf--trailing">Happy Coding!</p></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@ronaldolima" class="p-author h-card">Ronaldo Faria Lima</a> on <a href="https://medium.com/p/436abf1c3f5d"><time class="dt-published" datetime="2019-03-12T18:53:57.352Z">March 12, 2019</time></a>.</p><p><a href="https://medium.com/@ronaldolima/desenvolvendo-em-python-usando-wsl-436abf1c3f5d" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on December 25, 2020.</p></footer></article></body></html>