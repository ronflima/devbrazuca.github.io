<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>O que é o WSL?</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">O que é o WSL?</h1>
</header>
<section data-field="subtitle" class="p-summary">
Não é uma VM…
</section>
<section data-field="body" class="e-content">
<section name="ebc2" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="4ec1" id="4ec1" class="graf graf--h3 graf--leading graf--title">O que é o WSL?</h3><h4 name="003d" id="003d" class="graf graf--h4 graf-after--h3 graf--subtitle">Não é uma VM…</h4><figure name="2152" id="2152" class="graf graf--figure graf-after--h4"><img class="graf-image" data-image-id="1*0saeLQSOHMlNDhu9ahMTSg.png" data-width="678" data-height="451" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*0saeLQSOHMlNDhu9ahMTSg.png"></figure><p name="0ca5" id="0ca5" class="graf graf--p graf-after--figure">Há um tempo atrás escrevi um artigo falando de <a href="https://ronaldolima.eti.br/desenvolvendo-em-python-usando-wsl-436abf1c3f5d" data-href="https://ronaldolima.eti.br/desenvolvendo-em-python-usando-wsl-436abf1c3f5d" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">como desenvolver em python no Windows 10 usando o WSL</a>. Agora é hora de falar um pouco do que diabos é o WSL e por que é um negócio muito interessante.</p><p name="8a0a" id="8a0a" class="graf graf--p graf-after--p">A ideia por detrás do WSL não é absolutamente nova. Há vários anos existem projetos que criam camadas POSIX para compatibilizar o Windows com os sistemas *nix, em particular Linux. Por exemplo, o <a href="https://www.cygwin.com/" data-href="https://www.cygwin.com/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Cygwin</a> existe há anos (lembro de usá-lo no Windows 2000, para se ter ideia). Porém, o Cygwin é bem distinto em termos de premissas e objetivos se comparado ao WSL. Apesar de criar uma camada de compatibilidade através de uma DLL, o Cygwin nunca teve a intenção de executar binários linux dentro do Windows.</p><h4 name="a540" id="a540" class="graf graf--h4 graf-after--p">O que o WSL não é</h4><p name="f191" id="f191" class="graf graf--p graf-after--h4">O WSL não é uma máquina virtual. Você pode instalá-lo no seu Windows sem a necessidade dos componentes Hyper-V. Ou seja, não existe virtualização para que o WSL execute no seu PC. Na verdade, o WSL é uma camada de compatibilidade que permite que programas linux sejam executados no Windows.</p><p name="7d75" id="7d75" class="graf graf--p graf-after--p">Ou seja, ele entende o formato ELF dos executáveis linux e tem um loader para carregar estes executáveis. Além disso, oferece todas as system calls do Linux, que passam por uma camada que as converte em system calls do Windows.</p><p name="981a" id="981a" class="graf graf--p graf-after--p">O que faz o WSL ser diferente de um Linux rodando em uma VM é basicamente a performance e a quantidade de recursos gastos: um shell Bourne Again, <em class="markup--em markup--p-em">bash</em> para quem não sabe, consome exatamente 240KB de memória no meu sistema. Outra coisa interessante: todos os processos que você executar dentro do WSL são listados como processos do Windows no gerenciador de tarefas.</p><h4 name="550f" id="550f" class="graf graf--h4 graf-after--p">Não há kernel linux</h4><p name="cc53" id="cc53" class="graf graf--p graf-after--h4">Apesar de você executar a sua distro predileta, não há um kernel linux sendo executado. Na verdade, o WSL faz as vezes do kernel, sem virtualização, o que faz com que o subsistema seja muito eficiente e leve. Por ser um subsistema do Windows, ele executa de forma muito eficiente.</p><p name="d01c" id="d01c" class="graf graf--p graf-after--p">Sem sombra de dúvida, um linux executando direto na sua máquina será muito mais eficiente. Mas, considerando-se que trata-se de um ambiente de execução, a comparação correta, na minha opinião, é com relação a uma VM e não com relação a um kernel tomando conta da sua máquina.</p><h4 name="d774" id="d774" class="graf graf--h4 graf-after--p">Nem tudo está implementado ainda</h4><p name="252e" id="252e" class="graf graf--p graf-after--h4">Apesar de bem completo e de cobrir grande parte dos cenários de uso de desenvolvimento, o WSL não está totalmente completo. Por exemplo, ao criar um database no PostgreSQL, você verá uma série de advertências. São system calls que ainda não foram implementados. Porém, isto não impede que você utilize o PostgreSQL para desenvolvimento.</p><p name="ffec" id="ffec" class="graf graf--p graf-after--p">Eu vejo o WSL como uma excelente ferramenta de desenvolvimento de software, o que permite que tecnologias criadas no linux possam ser usadas no Windows sem necessidade de adaptações, adaptações estas que podem ser muito cansativas ou limitantes em vários aspectos.</p><p name="1492" id="1492" class="graf graf--p graf-after--p">Tenha em mente que o WSL não é uma bala de prata. Mas resolve grande parte dos problemas. Eu uso o emacs, meu editor favorito, em modo gráfico (dentro do XWindows) e tudo funciona lindamente. A integração com o file system do Windows é absolutamente transparente: os arquivos com o meu código-fonte ficam num drive Windows que acesso via soft link dentro do WSL. Afinal, os drives são mapeados e montados como volumes linux dentro do ambiente.</p><h4 name="0b95" id="0b95" class="graf graf--h4 graf-after--p">Por que você deveria experimentar</h4><p name="0828" id="0828" class="graf graf--p graf-after--h4">Se você desenvolve software em alguma linguagem que foi criada no Linux, como python ou ruby, você deveria experimentar o WSL no seu dia-a-dia. Você terá à mão todo tooling criado para o linux sem nenhuma necessidade de adaptações. Poderá criar automações com shell scripts, makefiles, e usar SSH sem ter de instalar coisas como PuTTY ou editores como UltraEdit, ou Crimson Editor.</p><p name="f9db" id="f9db" class="graf graf--p graf-after--p">Quase tudo o que você faz no linux você faz no WSL. Até aqui, dentro das minhas necessidades, não tive absolutamente nenhum problema. Porém, isto não quer dizer que você não vá ter. Dependendo do seu cenário de uso, as limitações impostas pelo WSL poderão ser suficientes para justificar um dual-boot com o Linux ou, até mesmo, uma VM.</p><p name="829f" id="829f" class="graf graf--p graf-after--p">De toda forma, vale a pena experimentar. Afinal, é um componente do Windows 64 bits. Você já pagou por ele. Só precisa ativá-lo e instalar uma das distros que estão disponíveis na loja da Microsoft. De resto, tudo funciona como se fosse o seu linux mesmo: apt-get, ls, etc.</p><h4 name="a227" id="a227" class="graf graf--h4 graf-after--p">A ideia não é nova</h4><p name="cc29" id="cc29" class="graf graf--p graf-after--h4">Apesar de tudo, a ideia por trás do WSL não é nova. O FreeBSD implementa uma camada de compatibilidade para executar programas linux há anos. O fato é que BSD não é linux, mas unix: tudo é diferente, apesar das similaridades em termos de operação e conceitos. Assim, foi necessária a criação dessa camada que faz com que os programas linux sejam executados de forma eficiente e transparente dentro de um ambiente BSD.</p><p name="cb8e" id="cb8e" class="graf graf--p graf-after--p">O que distingue bastante o WSL da implementação do BSD é justamente a heterogeneidade do sistema. O Linux é um sistema <em class="markup--em markup--p-em">unix-like</em>, ou seja, segue conceitos existentes no unix, apesar de ser um sistema bem distinto do unix. No entanto, as similaridades do unix com o linux fazem com que a camada de compatibilidade seja mais simples. No caso do Windows o buraco é bem mais embaixo: tudo é diferente. Mesmo os system calls são completamente diferentes não só em termos de sintaxe como em termos de nomenclatura e, em alguns casos, semântica.</p><h4 name="70e1" id="70e1" class="graf graf--h4 graf-after--p">Tem novidade vindo</h4><p name="3521" id="3521" class="graf graf--p graf-after--h4">A Microsoft segue desenvolvendo o WSL, que tem ganhado bastante popularidade entre os developers. Ouvi dizer que a próxima versão, que já está disponível para avaliação no programa Windows Insiders, é fenomenal. Aparentemente fizeram melhorias na performance, que já era o ponto alto do software, e adicionaram alguns system calls que faltavam.</p><p name="33c0" id="33c0" class="graf graf--p graf-after--p">Eu não canso de repetir que Satya Nadella fez um bem danado para a Microsoft.</p><p name="30a0" id="30a0" class="graf graf--p graf-after--p graf--trailing">Happy Coding!</p></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@ronaldolima" class="p-author h-card">Ronaldo Faria Lima</a> on <a href="https://medium.com/p/14bbad280d9d"><time class="dt-published" datetime="2019-09-06T11:40:51.143Z">September 6, 2019</time></a>.</p><p><a href="https://medium.com/@ronaldolima/o-que-%C3%A9-o-wsl-14bbad280d9d" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on December 25, 2020.</p></footer></article></body></html>