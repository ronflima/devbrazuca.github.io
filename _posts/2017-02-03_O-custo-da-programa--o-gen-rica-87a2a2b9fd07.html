<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>O custo da programação genérica</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">O custo da programação genérica</h1>
</header>
<section data-field="subtitle" class="p-summary">
Nada é de graça, mesmo o que é bom.
</section>
<section data-field="body" class="e-content">
<section name="d7c1" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="bc79" id="bc79" class="graf graf--h3 graf--leading graf--title">O custo da programação genérica</h3><h4 name="295c" id="295c" class="graf graf--h4 graf-after--h3 graf--subtitle">Nada é de graça, mesmo o que é bom.</h4><figure name="f9fd" id="f9fd" class="graf graf--figure graf-after--h4"><img class="graf-image" data-image-id="1*TU9RRODLViUP4olwkj3Jwg.jpeg" data-width="3072" data-height="2048" src="https://cdn-images-1.medium.com/max/800/1*TU9RRODLViUP4olwkj3Jwg.jpeg"></figure><p name="ed8e" id="ed8e" class="graf graf--p graf-after--figure">Swift é uma linguagem que incorporou o que há de bom em diversas linguagens de programação. Quando vi a especificação da linguagem pela primeira vez, fiquei entusiasmado de haverem incluído a minha característica predileta do C++: a programação genérica. C++ chama isso de <em class="markup--em markup--p-em">templates</em> enquanto Swift chama de <em class="markup--em markup--p-em">generics. </em>O nome dado em C++ é mais adequado pois é isto que os <em class="markup--em markup--p-em">generics </em>basicamente são: modelos de código.</p><p name="37de" id="37de" class="graf graf--p graf-after--p">A ideia do modelo de programação genérica é permitir que você crie um algoritmo ou uma estrutura de dados com um comportamento muito bem definido, porém com lacunas que são preenchidas posteriormente com um tipo de dado arbitrário. Assim, é possível usar a mesma lógica para tipos de dados diferentes e não relacionados sem, contudo, abrir mão da verificação de tipos.</p><p name="fce2" id="fce2" class="graf graf--p graf-after--p">Em C é possível realizar programação genérica. No entanto, abre-se mão da verificação de tipos, algo que pode levar aos mais diversos problemas. Por exemplo, a função da STDC <em class="markup--em markup--p-em">qsort</em> é uma função genérica: ela aplica o algoritmo <em class="markup--em markup--p-em">merge sort</em> em qualquer estrutura contígua de dados. A principal desvantagem da linguagem C para a programação genérica, que é a ausência da verificação de tipos, acaba trazendo uma outra vantagem: o código executável final é notadamente menor. Por que?</p><p name="ce4e" id="ce4e" class="graf graf--p graf-after--p">A programação genérica, conforme é implementada pelas linguagens modernas, tem uma característica interessante: o compilador gera código para você. Por exemplo, quem programa em Java conhece o <em class="markup--em markup--p-em">ArrayList</em>. Ao criar um <em class="markup--em markup--p-em">ArrayList&lt;MyClass&gt;</em>, você está, na verdade, instruindo ao compilador que crie uma nova classe baseada na estrutura <em class="markup--em markup--p-em">ArrayList</em>, porém tendo como tipo interno <em class="markup--em markup--p-em">MyClass</em>. Ou seja, o compilador vai gerar uma classe usando como base as definições de <em class="markup--em markup--p-em">ArrayList</em> e utilizando como tipo o parâmetro <em class="markup--em markup--p-em">MyClass</em>.</p><p name="305d" id="305d" class="graf graf--p graf-after--p">Isto quer dizer que para cada tipo diferente que você usar como parâmetro da estrutura genérica será gerado código para ele. Assim, se você tiver <em class="markup--em markup--p-em">ArrayList&lt;BigDecimal&gt;, ArrayList&lt;String&gt;, ArrayList&lt;StringBuffer&gt;</em>, você terá código gerado para cada uma destas estruturas. Será código diferente, pois cada estrutura é diferente.</p><p name="8458" id="8458" class="graf graf--p graf-after--p">O efeito que isto causa no seu código é o aumento do tamanho do executável. E é algo compreensível: para cada instanciação de um template, você terá código gerado exclusivamente para ele. E por que o tamanho do executável é algo para me preocupar?</p><p name="aae0" id="aae0" class="graf graf--p graf-after--p">Imagine o seguinte: seu executável final tem 1MB de tamanho. O que isto quer dizer? Que ali dentro há 1MB de instruções em código de máquina, dados estáticos que são as constantes que você utilizou no código, instruções de ligação dinâmica para resolução de símbolos em bibliotecas dinamicamente ligadas (DLL no Windows, shared libraries no Unix), o <em class="markup--em markup--p-em">loader</em> do programa e mais uma penca de coisas. Isto tudo precisa ser carregado na memória para que o processador comece a executar o seu programa.</p><p name="8bd6" id="8bd6" class="graf graf--p graf-after--p">Em computadores de boa capacidade, o aumento trazido pelo uso de genéricos beira a irrelevância. Porém, para sistemas embarcados, com pequenos smartphones ou ainda sistemas especialistas (leia-se internet das coisas) isto faz diferença. Não é à toa que em sistemas embarcados a linguagem mais usada ainda é C, como em máquinas de cartão de crédito e coletores de dados.</p><h4 name="b10b" id="b10b" class="graf graf--h4 graf-after--p">Devo ou não usar generics?</h4><p name="ccd9" id="ccd9" class="graf graf--p graf-after--h4">A resposta é curta e grossa: deve. Trata-se de um recurso importante das linguagens que suportam sintatica e semanticamente a programação genérica. Simplifica muito a vida do programador e é uma ferramenta fantástica justamente por que minimiza os erros relacionados ao <em class="markup--em markup--p-em">casting</em> incorreto de tipos.</p><p name="8348" id="8348" class="graf graf--p graf-after--p graf--trailing">É importante, porém, entender que os generics têm um preço que, no geral, é barato demais dado o benefício que é utilizar o recurso. Mas há cenários nos quais as restrições impostas são excessivas a ponto de tornar o uso dos generics algo proibitivo. No entanto, estes cenários são raros e localizados e, provavelmente você será obrigado a usar uma linguagem de programação que não suporte o recurso.</p></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@ronaldolima" class="p-author h-card">Ronaldo Faria Lima</a> on <a href="https://medium.com/p/87a2a2b9fd07"><time class="dt-published" datetime="2017-02-03T11:25:11.796Z">February 3, 2017</time></a>.</p><p><a href="https://medium.com/@ronaldolima/o-custo-da-programa%C3%A7%C3%A3o-gen%C3%A9rica-87a2a2b9fd07" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on December 25, 2020.</p></footer></article></body></html>